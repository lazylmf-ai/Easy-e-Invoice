(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[101],{3127:function(e,t,s){Promise.resolve().then(s.bind(s,2059))},2059:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var i=s(7573),a=s(7653),l=s(1695),n=s(286),c=s(5118),r=s(5043),d=s(8682),o=s(9902),m=s(7747),x=s(3333);let u=["MYR","USD","EUR","SGD","GBP","AUD","JPY","CNY"],h=[0,6,10],v=o.z.object({itemDescription:o.z.string().min(1,"Item description is required").max(500),itemSku:o.z.string().max(100).optional(),quantity:o.z.string().regex(/^\d+(\.\d{1,3})?$/,"Quantity must be a valid number").default("1"),unitPrice:o.z.string().regex(/^\d+\.\d{2}$/,"Unit price must have 2 decimal places"),discountAmount:o.z.string().regex(/^\d+\.\d{2}$/,"Discount must have 2 decimal places").default("0.00"),sstRate:o.z.number().refine(e=>h.includes(e),"Invalid SST rate").default(0),sstAmount:o.z.string().regex(/^\d+\.\d{2}$/,"SST amount must have 2 decimal places").default("0.00"),taxExemptionCode:o.z.string().max(20).optional(),notes:o.z.string().max(500).optional(),metadata:o.z.record(o.z.any()).optional()}),p=o.z.object({invoiceNumber:o.z.string().min(1,"Invoice number is required").max(100),eInvoiceType:o.z.enum(["01","02","03","04","11","12","13","14"]).default("01"),issueDate:o.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Invalid date format"),dueDate:o.z.string().regex(/^\d{4}-\d{2}-\d{2}$/,"Invalid date format").optional(),currency:o.z.enum(u).default("MYR"),exchangeRate:o.z.string().regex(/^\d+\.\d{2,6}$/,"Exchange rate must have 2-6 decimal places").default("1.000000"),poNumber:o.z.string().max(50).optional(),internalRef:o.z.string().max(100).optional(),notes:o.z.string().max(1e3).optional(),metadata:o.z.record(o.z.any()).optional(),buyerName:o.z.string().min(1,"Buyer name is required").max(255),buyerTin:o.z.string().regex(/^(C\d{10}|\d{12})$/,"Invalid Malaysian TIN format").optional(),buyerCountryCode:o.z.string().length(2).default("MY"),buyerIsIndividual:o.z.boolean().default(!1),buyerAddress:o.z.object({line1:o.z.string().max(255),line2:o.z.string().max(255).optional(),city:o.z.string().max(100),state:o.z.string().max(100),postalCode:o.z.string().max(20),country:o.z.string().length(2).default("MY")}).optional(),buyerContact:o.z.object({email:o.z.string().email().optional(),phone:o.z.string().max(20).optional()}).optional(),lineItems:o.z.array(v).min(1,"At least one line item is required")});function j(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0.00",i=parseFloat(e);return(i*parseFloat(t)-parseFloat(s)).toFixed(2)}function b(e,t){return(parseFloat(e)*t/100).toFixed(2)}let g=o.z.object({invoice:p,lineItems:o.z.array(v).min(1,"At least one line item is required"),buyerId:o.z.string().optional()}),N=u.map(e=>({code:e,name:({MYR:"Malaysian Ringgit",USD:"US Dollar",EUR:"Euro",GBP:"British Pound",SGD:"Singapore Dollar",JPY:"Japanese Yen",CNY:"Chinese Yuan",AUD:"Australian Dollar",CAD:"Canadian Dollar",CHF:"Swiss Franc"})[e]||e,symbol:({MYR:"RM",USD:"$",EUR:"€",GBP:"\xa3",SGD:"S$",JPY:"\xa5",CNY:"\xa5",AUD:"A$",CAD:"C$",CHF:"CHF"})[e]||e})),y=Object.entries({"01":"Invoice","02":"Credit Note","03":"Debit Note","04":"Refund Note",11:"Self-Billed Invoice",12:"Self-Billed Credit Note",13:"Self-Billed Debit Note",14:"Self-Billed Refund Note"}).map(e=>{let[t,s]=e;return{value:t,label:s}});function f(e){var t,s,l,n,c,o,u,h;let{initialData:v,templateData:p,onSubmit:f,onValidate:I,isLoading:S=!1,mode:z="create"}=e,[w,C]=(0,a.useState)({subtotal:0,totalDiscount:0,totalSst:0,grandTotal:0}),{register:D,control:k,handleSubmit:R,watch:F,setValue:T,formState:{errors:A,isValid:M}}=(0,r.cI)({resolver:(0,d.F)(g),defaultValues:p||v||{invoice:{invoiceNumber:"",currency:"MYR",exchangeRate:"1.000000",eInvoiceType:"01",isConsolidated:!1,issueDate:new Date().toISOString().split("T")[0],subtotal:"0.00",sstAmount:"0.00",totalDiscount:"0.00",grandTotal:"0.00",status:"draft"},lineItems:[{itemDescription:"",quantity:"1",unitPrice:"0.00",discountAmount:"0.00",lineTotal:"0.00",sstRate:"0.00",sstAmount:"0.00"}]},mode:"onChange"}),{fields:P,append:E,remove:B}=(0,r.Dq)({control:k,name:"lineItems"}),U=F(),Y=(0,a.useCallback)(()=>{if(!U.lineItems)return;let e=0,t=0,s=0;U.lineItems.forEach((i,a)=>{let l=parseFloat(i.quantity||"0"),n=parseFloat(i.unitPrice||"0"),c=parseFloat(i.discountAmount||"0"),r=parseFloat(i.sstRate||"0"),d=j(l,n,c),o=b(d,r);T("lineItems.".concat(a,".lineTotal"),d.toFixed(2)),T("lineItems.".concat(a,".sstAmount"),o.toFixed(2)),e+=d,t+=o,s+=c});let i=function(e){let t=0,s=0;e.forEach(e=>{let i=parseFloat(j(e.quantity,e.unitPrice,e.discountAmount||"0.00")),a=parseFloat(b(i.toFixed(2),e.sstRate));t+=i,s+=a});let i=t+s;return{subtotal:t.toFixed(2),totalSst:s.toFixed(2),grandTotal:i.toFixed(2)}}(e,0,t);T("invoice.subtotal",e.toFixed(2)),T("invoice.sstAmount",t.toFixed(2)),T("invoice.totalDiscount",s.toFixed(2)),T("invoice.grandTotal",i.toFixed(2)),C({subtotal:e,totalDiscount:s,totalSst:t,grandTotal:i})},[U.lineItems,T]);(0,a.useEffect)(()=>{Y()},[Y]);let q=e=>{P.length>1&&B(e)};return(0,i.jsxs)("form",{onSubmit:R(e=>{f(e)}),className:"space-y-8",children:[!(null===(t=U.invoice)||void 0===t?void 0:t.isConsolidated)&&(0,i.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Buyer Information"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Buyer Name *"}),(0,i.jsx)("input",{type:"text",...D("invoice.buyerName"),className:"input mt-1",placeholder:"Customer/Buyer name"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Buyer TIN"}),(0,i.jsx)("input",{type:"text",...D("invoice.buyerTin"),className:"input mt-1",placeholder:"C1234567890 or 123456789012"}),(0,i.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Required for B2B transactions"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,i.jsx)("input",{type:"email",...D("invoice.buyerEmail"),className:"input mt-1",placeholder:"buyer@company.com"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,i.jsx)("input",{type:"tel",...D("invoice.buyerPhone"),className:"input mt-1",placeholder:"+60123456789"})]}),(0,i.jsxs)("div",{className:"sm:col-span-2",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,i.jsx)("textarea",{...D("invoice.buyerAddress"),rows:2,className:"input mt-1",placeholder:"Complete buyer address"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Invoice Information"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Invoice Number *"}),(0,i.jsx)("input",{type:"text",...D("invoice.invoiceNumber"),className:"input mt-1 ".concat((null===(s=A.invoice)||void 0===s?void 0:s.invoiceNumber)?"border-red-300":""),placeholder:"INV-2024-001"}),(null===(l=A.invoice)||void 0===l?void 0:l.invoiceNumber)&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.invoice.invoiceNumber.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Invoice Type *"}),(0,i.jsx)("select",{...D("invoice.eInvoiceType"),className:"input mt-1",children:y.map(e=>(0,i.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Issue Date *"}),(0,i.jsx)("input",{type:"date",...D("invoice.issueDate"),className:"input mt-1 ".concat((null===(n=A.invoice)||void 0===n?void 0:n.issueDate)?"border-red-300":"")}),(null===(c=A.invoice)||void 0===c?void 0:c.issueDate)&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.invoice.issueDate.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Due Date"}),(0,i.jsx)("input",{type:"date",...D("invoice.dueDate"),className:"input mt-1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Currency *"}),(0,i.jsx)("select",{...D("invoice.currency"),className:"input mt-1",children:N.map(e=>(0,i.jsxs)("option",{value:e.code,children:[e.code," - ",e.name]},e.code))})]}),(null===(o=U.invoice)||void 0===o?void 0:o.currency)!=="MYR"&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Exchange Rate *"}),(0,i.jsx)("input",{type:"number",step:"0.000001",...D("invoice.exchangeRate"),className:"input mt-1",placeholder:"1.000000"}),(0,i.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Rate from Bank Negara Malaysia"})]})]}),(0,i.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"checkbox",...D("invoice.isConsolidated"),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,i.jsx)("label",{className:"ml-2 block text-sm text-gray-900",children:"This is a consolidated B2C invoice"})]}),(null===(u=U.invoice)||void 0===u?void 0:u.isConsolidated)&&(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Consolidation Period"}),(0,i.jsx)("input",{type:"month",...D("invoice.metadata.consolidationPeriod"),className:"input mt-1"})]})}),["02","03"].includes((null===(h=U.invoice)||void 0===h?void 0:h.eInvoiceType)||"")&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Reference Invoice Number *"}),(0,i.jsx)("input",{type:"text",...D("invoice.referenceInvoiceId"),className:"input mt-1",placeholder:"Original invoice ID"}),(0,i.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Required for credit and debit notes"})]})]}),(0,i.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Internal Reference"}),(0,i.jsx)("input",{type:"text",...D("invoice.internalRef"),className:"input mt-1",placeholder:"Internal tracking number"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"PO Number"}),(0,i.jsx)("input",{type:"text",...D("invoice.poNumber"),className:"input mt-1",placeholder:"Purchase order number"})]})]})]}),(0,i.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Line Items"}),(0,i.jsxs)("button",{type:"button",onClick:()=>{E({itemDescription:"",quantity:"1",unitPrice:"0.00",discountAmount:"0.00",lineTotal:"0.00",sstRate:"0.00",sstAmount:"0.00"})},className:"btn-secondary flex items-center",children:[(0,i.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),(0,i.jsx)("div",{className:"space-y-4",children:P.map((e,t)=>{var s,a,l,n,c,r,d,o,m,u,h,v,p,j;return(0,i.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:["Item ",t+1]}),P.length>1&&(0,i.jsx)("button",{type:"button",onClick:()=>q(t),className:"text-red-600 hover:text-red-800",children:(0,i.jsx)(x.Z,{className:"h-4 w-4"})})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,i.jsxs)("div",{className:"lg:col-span-2",children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description *"}),(0,i.jsx)("input",{type:"text",...D("lineItems.".concat(t,".itemDescription")),className:"input mt-1 ".concat((null===(a=A.lineItems)||void 0===a?void 0:null===(s=a[t])||void 0===s?void 0:s.itemDescription)?"border-red-300":""),placeholder:"Item description"}),(null===(n=A.lineItems)||void 0===n?void 0:null===(l=n[t])||void 0===l?void 0:l.itemDescription)&&(0,i.jsx)("p",{className:"mt-1 text-sm text-red-600",children:null===(r=A.lineItems[t])||void 0===r?void 0:null===(c=r.itemDescription)||void 0===c?void 0:c.message})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"SKU/Code"}),(0,i.jsx)("input",{type:"text",...D("lineItems.".concat(t,".itemSku")),className:"input mt-1",placeholder:"SKU or item code"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity *"}),(0,i.jsx)("input",{type:"number",step:"0.001",...D("lineItems.".concat(t,".quantity")),className:"input mt-1 ".concat((null===(o=A.lineItems)||void 0===o?void 0:null===(d=o[t])||void 0===d?void 0:d.quantity)?"border-red-300":""),placeholder:"1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Unit Price *"}),(0,i.jsx)("input",{type:"number",step:"0.01",...D("lineItems.".concat(t,".unitPrice")),className:"input mt-1 ".concat((null===(u=A.lineItems)||void 0===u?void 0:null===(m=u[t])||void 0===m?void 0:m.unitPrice)?"border-red-300":""),placeholder:"0.00"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Discount"}),(0,i.jsx)("input",{type:"number",step:"0.01",...D("lineItems.".concat(t,".discountAmount")),className:"input mt-1",placeholder:"0.00"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"SST Rate (%)"}),(0,i.jsxs)("select",{...D("lineItems.".concat(t,".sstRate")),className:"input mt-1",children:[(0,i.jsx)("option",{value:"0.00",children:"0% (No SST)"}),(0,i.jsx)("option",{value:"6.00",children:"6% (Standard SST)"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tax Exemption"}),(0,i.jsx)("input",{type:"text",...D("lineItems.".concat(t,".taxExemptionCode")),className:"input mt-1",placeholder:"Exemption code"})]})]}),(0,i.jsx)("div",{className:"mt-4 bg-gray-50 p-3 rounded-md",children:(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Line Total: "}),(0,i.jsx)("span",{className:"font-medium",children:(null===(v=U.lineItems)||void 0===v?void 0:null===(h=v[t])||void 0===h?void 0:h.lineTotal)||"0.00"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-600",children:"SST Amount: "}),(0,i.jsx)("span",{className:"font-medium",children:(null===(j=U.lineItems)||void 0===j?void 0:null===(p=j[t])||void 0===p?void 0:p.sstAmount)||"0.00"})]})]})})]},e.id)})})]}),(0,i.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Invoice Totals"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,i.jsxs)("span",{className:"font-medium",children:["RM ",w.subtotal.toFixed(2)]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Total Discount:"}),(0,i.jsxs)("span",{className:"font-medium",children:["RM ",w.totalDiscount.toFixed(2)]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"SST (6%):"}),(0,i.jsxs)("span",{className:"font-medium",children:["RM ",w.totalSst.toFixed(2)]})]}),(0,i.jsx)("div",{className:"border-t pt-3",children:(0,i.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[(0,i.jsx)("span",{children:"Grand Total:"}),(0,i.jsxs)("span",{children:["RM ",w.grandTotal.toFixed(2)]})]})})]})]}),(0,i.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),(0,i.jsx)("textarea",{...D("invoice.notes"),rows:3,className:"input mt-1",placeholder:"Additional notes or comments..."})]})]}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("div",{children:I&&(0,i.jsx)("button",{type:"button",onClick:()=>{I&&M&&I(U)},disabled:!M||S,className:"btn-secondary mr-4",children:"Validate Invoice"})}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:()=>T("invoice.status","draft"),className:"btn-secondary",children:"Save as Draft"}),(0,i.jsx)("button",{type:"submit",disabled:!M||S,className:"btn-primary",children:S?"Saving...":"create"===z?"Create Invoice":"Update Invoice"})]})]})]})}function I(){var e;let[t,s]=(0,a.useState)(!1),[r,d]=(0,a.useState)(""),[o,m]=(0,a.useState)(null),[x,u]=(0,a.useState)(null),{user:h}=(0,n.a)(),v=(0,l.useRouter)(),p=(0,l.useSearchParams)();(0,a.useEffect)(()=>{let e=p.get("template");e&&j(e)},[p]);let j=async e=>{try{let t=await c.hi.templates.use(e);t.template&&u(t.template.templateData)}catch(e){console.error("Failed to load template:",e),d("Failed to load template")}},b=async e=>{if(!(null==h?void 0:h.hasCompletedOnboarding)){d("Please complete organization setup first");return}s(!0),d("");try{let t=await c.hi.invoices.create(e);if(t.invoice)v.push("/invoices/".concat(t.invoice.id));else throw Error("Failed to create invoice")}catch(e){console.error("Invoice creation failed:",e),d(e.message||"Failed to create invoice. Please try again.")}finally{s(!1)}},g=async e=>{s(!0),d("");try{let t=await c.hi.invoices.validate(e);m(t.validation)}catch(e){console.error("Invoice validation failed:",e),d(e.message||"Failed to validate invoice")}finally{s(!1)}};return(null==h?void 0:h.hasCompletedOnboarding)?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Create Invoice"}),(0,i.jsx)("p",{className:"mt-2 text-gray-600",children:"Create a new e-Invoice with Malaysian compliance validation"})]}),(0,i.jsx)("div",{className:"flex items-center space-x-4",children:(0,i.jsx)("button",{onClick:()=>v.push("/invoices"),className:"btn-secondary",children:"Cancel"})})]})}),r&&(0,i.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),(0,i.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,i.jsx)("p",{children:r})})]})]})}),o&&(0,i.jsx)("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsxs)("h3",{className:"text-sm font-medium text-blue-800",children:["Validation Results (Score: ",o.score,"/100)"]}),(0,i.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:o.isValid?(0,i.jsx)("p",{children:"✅ Invoice passed Malaysian e-Invoice validation!"}):(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"❌ Invoice has validation issues:"}),(0,i.jsx)("ul",{className:"mt-2 list-disc list-inside",children:null===(e=o.results)||void 0===e?void 0:e.map((e,t)=>(0,i.jsxs)("li",{className:"error"===e.severity?"text-red-700":"text-yellow-700",children:[e.message," - ",e.fixSuggestion]},t))})]})})]})]})}),(0,i.jsx)(f,{onSubmit:b,onValidate:g,isLoading:t,templateData:x,mode:"create"})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,i.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"flex-shrink-0",children:(0,i.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Organization Setup Required"}),(0,i.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,i.jsx)("p",{children:"You need to complete your organization setup before creating invoices."})}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)("div",{className:"-mx-2 -my-1.5 flex",children:(0,i.jsx)("button",{onClick:()=>v.push("/org/setup"),className:"bg-yellow-50 px-2 py-1.5 rounded-md text-sm font-medium text-yellow-800 hover:bg-yellow-100",children:"Complete Setup"})})})]})]})})})})}function S(){return(0,i.jsx)(a.Suspense,{fallback:(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:(0,i.jsx)(I,{})})}},1236:function(e,t,s){"use strict";s.d(t,{KN:function(){return i.KN}});var i=s(4846)},2723:function(e,t,s){"use strict";s.d(t,{U2:function(){return i.U2},t8:function(){return i.t8}});var i=s(4846)},3957:function(e,t,s){"use strict";s.d(t,{M:function(){return i.M},_:function(){return i._}});var i=s(3587)}},function(e){e.O(0,[522,790,216,592,744],function(){return e(e.s=3127)}),_N_E=e.O()}]);