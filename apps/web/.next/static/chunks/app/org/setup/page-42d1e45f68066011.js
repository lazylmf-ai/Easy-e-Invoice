(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[243],{8611:function(e,s,t){Promise.resolve().then(t.bind(t,5632))},5632:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var a=t(7573),i=t(7653),r=t(286),l=t(1695),n=t(5118);let d=e=>{let s=e.replace(/\s/g,"").toUpperCase();return/^C\d{10}$/.test(s)?{isValid:!0,type:"corporate",format:"C1234567890"}:/^\d{12}$/.test(s)?{isValid:!0,type:"individual",format:"123456789012"}:{isValid:!1,type:"unknown",format:"",errors:["Invalid TIN format. Use C1234567890 or 123456789012"]}},c=[{code:"69200",description:"Accounting, bookkeeping and auditing",category:"M",sstApplicable:!0},{code:"62010",description:"Computer programming activities",category:"J",sstApplicable:!0},{code:"47190",description:"Other retail sale in non-specialized stores",category:"G",sstApplicable:!1},{code:"56101",description:"Restaurant activities",category:"I",sstApplicable:!1},{code:"71200",description:"Engineering activities and technical consultancy",category:"M",sstApplicable:!0},{code:"41000",description:"Development of building projects",category:"F",sstApplicable:!0}];function o(e){var s;let{onComplete:t,isLoading:r=!1}=e,[l,n]=(0,i.useState)(1),[o,m]=(0,i.useState)({name:"",brn:"",contactPerson:"",email:"",phone:"",tin:"",industryCode:"",industryDescription:"",isSstRegistered:!1,sstNumber:"",address:{line1:"",line2:"",city:"",state:"",postcode:"",country:"MY"}}),[u,x]=(0,i.useState)({tin:{isValid:!1,errors:[],warnings:[]},industry:{isValid:!1,errors:[],warnings:[]}}),[p,h]=(0,i.useState)(c),[g,j]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(o.tin){let e=d(o.tin);x(s=>({...s,tin:e}))}},[o.tin]),(0,i.useEffect)(()=>{o.industryCode?h(c.filter(e=>e.code.includes(o.industryCode)||e.description.toLowerCase().includes(o.industryCode.toLowerCase()))):h(c)},[o.industryCode]);let v=(e,s)=>{if(e.startsWith("address.")){let t=e.split(".")[1];m(e=>({...e,address:{...e.address,[t]:s}}))}else m(t=>({...t,[e]:s}))},y=(e,s)=>{m(t=>({...t,industryCode:e,industryDescription:s})),j(!1)},b=e=>{switch(e){case 1:return o.name&&o.contactPerson&&o.email;case 2:return u.tin.isValid&&o.industryCode;case 3:return!o.isSstRegistered||o.sstNumber;case 4:return o.address.line1&&o.address.city&&o.address.state&&o.address.postcode;default:return!1}};return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-8",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"\n            w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium\n            ".concat(l>=e?"bg-primary-600 text-white":"bg-gray-200 text-gray-600","\n          "),children:e}),e<4&&(0,a.jsx)("div",{className:"\n              w-16 h-1 mx-2\n              ".concat(l>e?"bg-primary-600":"bg-gray-200","\n            ")})]},e))}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(o)},className:"space-y-8",children:[(0,a.jsxs)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[1===l&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"input mt-1",value:o.name,onChange:e=>v("name",e.target.value),placeholder:"Your Company Sdn Bhd"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Business Registration Number"}),(0,a.jsx)("input",{type:"text",className:"input mt-1",value:o.brn,onChange:e=>v("brn",e.target.value),placeholder:"123456-X"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Person *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"input mt-1",value:o.contactPerson,onChange:e=>v("contactPerson",e.target.value),placeholder:"John Doe"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email Address *"}),(0,a.jsx)("input",{type:"email",required:!0,className:"input mt-1",value:o.email,onChange:e=>v("email",e.target.value),placeholder:"contact@company.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",className:"input mt-1",value:o.phone,onChange:e=>v("phone",e.target.value),placeholder:"+60 12-345 6789"})]})]})]}),2===l&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tax Information"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Malaysian TIN (Tax Identification Number) *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"input mt-1 ".concat(o.tin&&!u.tin.isValid?"border-red-300":""),value:o.tin,onChange:e=>v("tin",e.target.value),placeholder:"C1234567890 or 123456789012"}),o.tin&&!u.tin.isValid&&(0,a.jsx)("div",{className:"mt-2 text-sm text-red-600",children:null===(s=u.tin.errors)||void 0===s?void 0:s.map((e,s)=>(0,a.jsx)("p",{children:e},s))}),u.tin.isValid&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-green-600",children:["âœ“ Valid ",u.tin.type," TIN format"]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Industry Code (MSIC) *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"input mt-1",value:o.industryCode,onChange:e=>{v("industryCode",e.target.value),j(!0)},onFocus:()=>j(!0),placeholder:"Search industry code or description"}),g&&p.length>0&&(0,a.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md border border-gray-300 overflow-auto",children:p.map(e=>(0,a.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100",onClick:()=>y(e.code,e.description),children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.code}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.description}),e.sstApplicable&&(0,a.jsx)("div",{className:"text-xs text-blue-600",children:"SST Applicable"})]},e.code))}),o.industryDescription&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",o.industryDescription]})]})]}),3===l&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"SST Registration"}),(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-md",children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"About SST (Services and Sales Tax)"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,a.jsx)("p",{children:"SST is a 6% tax applicable to certain services and goods in Malaysia. If your business provides taxable services or sells taxable goods with annual revenue above the threshold, you need to register for SST."})})]})})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"sstRegistered",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:o.isSstRegistered,onChange:e=>v("isSstRegistered",e.target.checked)}),(0,a.jsx)("label",{htmlFor:"sstRegistered",className:"ml-3 block text-sm text-gray-900",children:"My business is registered for SST (6% Services and Sales Tax)"})]}),o.isSstRegistered&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"SST Registration Number *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"input mt-1",value:o.sstNumber,onChange:e=>v("sstNumber",e.target.value),placeholder:"SST-1234-5678-9012"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Your SST registration number as issued by Royal Malaysian Customs Department"})]})]})]}),4===l&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Business Address"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address Line 1 *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"input mt-1",value:o.address.line1,onChange:e=>v("address.line1",e.target.value),placeholder:"Street address, building name, unit number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address Line 2"}),(0,a.jsx)("input",{type:"text",className:"input mt-1",value:o.address.line2,onChange:e=>v("address.line2",e.target.value),placeholder:"Additional address information (optional)"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"input mt-1",value:o.address.city,onChange:e=>v("address.city",e.target.value),placeholder:"Kuala Lumpur"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"State *"}),(0,a.jsxs)("select",{required:!0,className:"input mt-1",value:o.address.state,onChange:e=>v("address.state",e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select State"}),(0,a.jsx)("option",{value:"Johor",children:"Johor"}),(0,a.jsx)("option",{value:"Kedah",children:"Kedah"}),(0,a.jsx)("option",{value:"Kelantan",children:"Kelantan"}),(0,a.jsx)("option",{value:"Kuala Lumpur",children:"Kuala Lumpur"}),(0,a.jsx)("option",{value:"Labuan",children:"Labuan"}),(0,a.jsx)("option",{value:"Melaka",children:"Melaka"}),(0,a.jsx)("option",{value:"Negeri Sembilan",children:"Negeri Sembilan"}),(0,a.jsx)("option",{value:"Pahang",children:"Pahang"}),(0,a.jsx)("option",{value:"Penang",children:"Penang"}),(0,a.jsx)("option",{value:"Perak",children:"Perak"}),(0,a.jsx)("option",{value:"Perlis",children:"Perlis"}),(0,a.jsx)("option",{value:"Putrajaya",children:"Putrajaya"}),(0,a.jsx)("option",{value:"Sabah",children:"Sabah"}),(0,a.jsx)("option",{value:"Sarawak",children:"Sarawak"}),(0,a.jsx)("option",{value:"Selangor",children:"Selangor"}),(0,a.jsx)("option",{value:"Terengganu",children:"Terengganu"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postcode *"}),(0,a.jsx)("input",{type:"text",required:!0,className:"input mt-1",value:o.address.postcode,onChange:e=>v("address.postcode",e.target.value),placeholder:"50000"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{l>1&&n(l-1)},disabled:1===l,className:"btn-secondary",children:"Previous"}),l<4?(0,a.jsx)("button",{type:"button",onClick:()=>{l<4&&n(l+1)},disabled:!b(l),className:"btn-primary",children:"Next"}):(0,a.jsx)("button",{type:"submit",disabled:!b(l)||r,className:"btn-primary",children:r?"Setting up...":"Complete Setup"})]})]})]})}function m(){let[e,s]=(0,i.useState)(!1),[t,d]=(0,i.useState)(""),{refreshUser:c}=(0,r.a)(),m=(0,l.useRouter)(),u=async e=>{s(!0),d("");try{let s=await n.hi.organization.setup(e);if(s.success)await c(),m.push("/dashboard");else throw Error(s.message||"Failed to setup organization")}catch(e){console.error("Organization setup failed:",e),d(e.message||"Failed to setup organization. Please try again.")}finally{s(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"mx-auto h-16 w-16 bg-primary-600 rounded-lg flex items-center justify-center mb-4",children:(0,a.jsx)("span",{className:"text-white font-bold text-2xl",children:"\uD83C\uDDF2\uD83C\uDDFE"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Organization Setup"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 max-w-2xl mx-auto",children:"Set up your organization for Malaysian e-Invoice compliance. This will enable you to create, validate, and export compliant e-Invoices according to LHDN requirements."})]}),t&&(0,a.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Setup Error"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,a.jsx)("p",{children:t})})]})]})}),(0,a.jsx)("div",{className:"bg-white shadow-sm rounded-lg p-6",children:(0,a.jsx)(o,{onComplete:u,isLoading:e})}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Need Help?"}),(0,a.jsxs)("p",{className:"text-sm text-blue-700",children:["If you need assistance with your TIN, industry codes, or SST registration, contact our support team at"," ",(0,a.jsx)("a",{href:"mailto:support@easyeinvoice.my",className:"underline",children:"support@easyeinvoice.my"})]})]})})]})})}}},function(e){e.O(0,[216,592,744],function(){return e(e.s=8611)}),_N_E=e.O()}]);